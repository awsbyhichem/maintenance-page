<VirtualHost *:80>
    ServerName 15.237.36.3
    RemoteIPHeader X-Forwarded-For
    RemoteIPHeader X-Real-IP

    DocumentRoot /var/www/html/app

    ErrorDocument 503 /maintenance/index.html
    RewriteEngine on

    RewriteCond /var/www/html/maintenance/ALL -f [OR]
    RewriteCond /var/www/html/maintenance/%{SERVER_NAME} -f
    RewriteCond %{REQUEST_URI} !^/maintenance/
    RewriteCond %{REQUEST_URI} !\.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2)$ [NC]
    RewriteRule ^ /maintenance/index.html [R=503,L]


    Alias /maintenance /var/www/html/maintenance
    <Directory /var/www/html/maintenance>
        Options -Indexes +FollowSymLinks +MultiViews
        AllowOverride None
        RewriteEngine On
        RewriteCond /var/www/html/maintenance/ALL !-f
        RewriteCond /var/www/html/maintenance/%{SERVER_NAME} !-f
        RewriteRule ^ - [F,L]

        Require all granted
    </Directory>

    <Directory /var/www/html/app>
        Options -Indexes +FollowSymLinks +MultiViews
        AllowOverride All
        Require all granted

        <IfModule mod_rewrite.c>
            Options -MultiViews
            RewriteEngine On
            RewriteCond %{REQUEST_URI} !^/server-status
            RewriteCond %{REQUEST_FILENAME} !-f
            RewriteRule ^(.*)$ index.html [QSA,L]
            RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
        </IfModule>

        <IfModule mod_deflate.c>
            AddOutputFilterByType DEFLATE application/javascript
            AddOutputFilterByType DEFLATE application/x-javascript
            AddOutputFilterByType DEFLATE text/javascript
        </IfModule>
    </Directory>
    <Files "index.html">
        FileEtag None
        <IfModule mod_headers.c>
            Header Unset ETag
            Header Set Cache-Control "max-age=0, no-store, no-cache, must-revalidate"
            Header Set Pragma "no-cache"
            Header Set Expires "Thu, 1 Jan 1970 00:00:00 GMT"
        </IfModule>
    </Files>






</VirtualHost>
